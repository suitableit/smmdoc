generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/provider-client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model ApiProviders {
  id         Int      @id @default(autoincrement())
  name       String   @unique
  api_key    String
  status     String   @default("active")
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  api_url    String   @default("")
  is_custom  Boolean  @default(false)

  @@index([name])
  @@index([status])
  @@map("api_providers")
}

model ProviderOrderLogs {
  id               Int      @id @default(autoincrement())
  orderId          Int
  action           String
  providerResponse String?  @db.Text
  status           String?
  errorMessage     String?  @db.Text
  createdAt        DateTime @default(now())

  @@index([orderId], map: "ProviderOrderLog_orderId_idx")
  @@index([action], map: "ProviderOrderLog_action_idx")
  @@index([createdAt], map: "ProviderOrderLog_createdAt_idx")
  @@map("provider_order_log")
}

model ProviderServiceConfigs {
  id                Int      @id @default(autoincrement())
  serviceId         Int      @unique
  providerId        Int?
  providerName      String?
  providerServiceId String?
  providerApiUrl    String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([serviceId], map: "ProviderServiceConfig_serviceId_idx")
  @@index([providerId], map: "ProviderServiceConfig_providerId_idx")
  @@map("provider_service_config")
}

model ProviderOrderTrackings {
  id               Int       @id @default(autoincrement())
  orderId          Int       @unique
  providerOrderId  String?
  providerStatus   String?
  isProviderOrder  Boolean   @default(false)
  providerResponse String?   @db.Text
  lastSyncAt       DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@index([orderId], map: "ProviderOrderTracking_orderId_idx")
  @@index([providerOrderId], map: "ProviderOrderTracking_providerOrderId_idx")
  @@index([isProviderOrder], map: "ProviderOrderTracking_isProviderOrder_idx")
  @@index([lastSyncAt], map: "ProviderOrderTracking_lastSyncAt_idx")
  @@map("provider_order_tracking")
}

model ProviderApiLogs {
  id               Int      @id @default(autoincrement())
  providerId       Int?
  endpoint         String
  method           String
  requestData      String?  @db.Text
  responseData     String?  @db.Text
  statusCode       Int?
  responseTime     Int?
  errorMessage     String?  @db.Text
  createdAt        DateTime @default(now())

  @@index([providerId], map: "ProviderApiLog_providerId_idx")
  @@index([endpoint], map: "ProviderApiLog_endpoint_idx")
  @@index([createdAt], map: "ProviderApiLog_createdAt_idx")
  @@map("provider_api_log")
}

model ProviderStatusMappings {
  id             Int      @id @default(autoincrement())
  providerId     Int
  providerStatus String
  internalStatus String
  description    String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@unique([providerId, providerStatus], map: "ProviderStatusMapping_providerId_providerStatus_key")
  @@index([providerId], map: "ProviderStatusMapping_providerId_idx")
  @@map("provider_status_mapping")
}