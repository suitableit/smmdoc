model Announcements {
  id                Int       @id @default(autoincrement())
  title             String
  content           String    @db.Text
  type              String    
  status            String    @default("draft")
  targetedAudience  String    @default("users")
  startDate         DateTime
  endDate           DateTime?
  isSticky          Boolean   @default(false)
  buttonEnabled     Boolean   @default(false)
  buttonText        String?
  buttonLink        String?
  visibility        String    @default("dashboard")
  views             Int       @default(0)
  order             Int       @default(0)
  createdBy         Int
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  user              Users      @relation(fields: [createdBy], references: [id], onDelete: Cascade)
  dismissedAnnouncements DismissedAnnouncements[]
  viewedAnnouncements    ViewedAnnouncements[]

  @@index([status])
  @@index([isSticky])
  @@index([targetedAudience])
  @@index([startDate])
  @@index([endDate])
  @@index([createdBy])
  @@index([order])
  @@map("announcements")
}

model DismissedAnnouncements {
  id             Int           @id @default(autoincrement())
  announcementId Int
  userId         Int
  dismissedAt    DateTime      @default(now())
  announcement   Announcements @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  user           Users          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([announcementId, userId])
  @@index([userId])
  @@index([announcementId])
  @@map("dismissed_announcements")
}

model ViewedAnnouncements {
  id             Int           @id @default(autoincrement())
  announcementId Int
  userId         Int
  viewedAt       DateTime      @default(now())
  announcement   Announcements @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  user           Users          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([announcementId, userId])
  @@index([userId])
  @@index([announcementId])
  @@map("viewed_announcements")
}

