model Announcements {
  id                Int       @id @default(autoincrement())
  title             String
  content           String    @db.Text
  type              String    // 'info' | 'warning' | 'success' | 'critical'
  status            String    @default("draft") // 'active' | 'scheduled' | 'expired' | 'draft'
  targetedAudience  String    @default("all") // 'all' | 'admins' | 'moderators'
  startDate         DateTime
  endDate           DateTime?
  isSticky          Boolean   @default(false)
  buttonEnabled     Boolean   @default(false)
  buttonText        String?
  buttonLink        String?
  views             Int       @default(0)
  createdBy         Int
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  user              Users      @relation(fields: [createdBy], references: [id], onDelete: Cascade)
  dismissedAnnouncements DismissedAnnouncements[]

  @@index([status])
  @@index([isSticky])
  @@index([targetedAudience])
  @@index([startDate])
  @@index([endDate])
  @@index([createdBy])
  @@map("announcements")
}

model DismissedAnnouncements {
  id             Int           @id @default(autoincrement())
  announcementId Int
  userId         Int
  dismissedAt    DateTime      @default(now())
  announcement   Announcements @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  user           Users          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([announcementId, userId])
  @@index([userId])
  @@index([announcementId])
  @@map("dismissed_announcements")
}

