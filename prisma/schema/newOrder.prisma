model NewOrder {
  id             Int             @id @default(autoincrement())
  categoryId     Int?
  serviceId      Int?
  userId         Int
  link           String
  qty            Int
  price          Float
  avg_time       String
  status         String          @default("pending")
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  remains        Int             @default(0)
  startCount     Int             @default(0)
  bdtPrice       Float
  currency       String
  usdPrice       Float
  charge         Float           @default(0)
  profit         Float           @default(0)
  serviceName    String?
  categoryName   String?
  // Service type specific fields
  packageType    Int?            @default(1) // Service package type (1-15)
  comments       String?         @db.Text // For comment services
  username       String?         // For username-based services
  posts          Int?            // For post-based services
  delay          Int?            // For delayed services (in minutes)
  minQty         Int?            // For subscription services
  maxQty         Int?            // For subscription services
  isDripfeed     Boolean         @default(false)
  dripfeedRuns   Int?            // Number of dripfeed runs
  dripfeedInterval Int?          // Interval between runs (in minutes)
  apiOrderId     String?         // External API order ID
  apiResponse    String?         @db.Text // API response data
  isSubscription Boolean         @default(false)
  subscriptionStatus String?     // For subscription orders
  cancelRequests CancelRequest[]
  category       Category?       @relation(fields: [categoryId], references: [id])
  service        Service?        @relation(fields: [serviceId], references: [id])
  user           User            @relation(fields: [userId], references: [id])
  refillRequests RefillRequest[]

  @@index([categoryId], map: "NewOrder_categoryId_fkey")
  @@index([serviceId], map: "NewOrder_serviceId_fkey")
  @@index([userId], map: "NewOrder_userId_fkey")
  @@index([packageType], map: "NewOrder_packageType_idx")
  @@index([status], map: "NewOrder_status_idx")
  @@map("neworder")
}
